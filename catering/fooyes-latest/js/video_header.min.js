var HeaderVideo=function(p){var q={container:p(".header-video"),header:p(".header-video--media"),videoTrigger:p("#video-trigger"),videoCloseTrigger:p("#video-close-trigger"),teaserVideo:p("#teaser-video"),autoPlayVideo:!1},j=function(){return videoDetails={id:q.header.attr("data-video-src"),teaser:q.header.attr("data-teaser-source"),provider:q.header.attr("data-provider").toLowerCase(),videoHeight:q.header.attr("data-video-height"),videoWidth:q.header.attr("data-video-width")},videoDetails},w=function(){q.container.data("aspectRatio",videoDetails.videoHeight/videoDetails.videoWidth),p(window).resize(function(){var a=p(window).width(),c=p(window).height();q.container.width(a).height(a*q.container.data("aspectRatio")),c<q.container.height()&&q.container.width(a).height(c)}).trigger("resize")},g=function(){q.videoTrigger.on("click",function(a){a.preventDefault(),m(),q.videoCloseTrigger.fadeIn()}),q.videoCloseTrigger.on("click",function(a){a.preventDefault(),k()})},b=function(){if(Modernizr.video&&!f()){var a=videoDetails.teaser,c='<video autoplay="true" loop="loop" muted id="teaser-video" class="teaser-video"><source src="'+a+'.mp4" type="video/mp4"><source src="'+a+'.ogv" type="video/ogg"></video>';q.container.append(c)}},m=function(){q.header.hide(),q.container.append(function(){if("youtube"===videoDetails.provider){var a='<iframe id="video" src="http://www.youtube.com/embed/'+videoDetails.id+'?rel=0&amp;hd=1&autohide=1&showinfo=0&autoplay=1&enablejsapi=1&origin=*" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'}else{if("vimeo"===videoDetails.provider){a='<iframe id="video" src="http://player.vimeo.com/video/'+videoDetails.id+'?title=0&amp;byline=0&amp;portrait=0&amp;color=3d96d2&autoplay=1" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'}else{if("html5"===videoDetails.provider){a='<video autoplay="true" loop="loop" id="video"><source src="'+videoDetails.id+'.mp4" type="video/mp4"><source src="'+videoDetails.id+'.ogv" type="video/ogg"></video>'}}}return a}()),h(),q.teaserVideo.hide()},k=function(){p("#video").remove(),q.teaserVideo.fadeIn(),x(),u()},h=function(){q.videoTrigger&&q.videoTrigger.fadeOut("slow")},x=function(){q.videoTrigger&&q.videoTrigger.fadeIn("slow")},u=function(){q.videoCloseTrigger.hide()},f=function(){return !!(p(window).width()<900&&Modernizr.touch)};return{init:function(a){q=p.extend(q,a),j(),w(),g(),q.videoCloseTrigger.hide(),videoDetails.teaser&&b(),q.autoPlayVideo&&m()}}}(jQuery,document);