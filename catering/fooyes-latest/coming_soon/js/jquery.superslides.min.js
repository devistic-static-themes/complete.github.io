/* Superslides - v0.6.3-wip - 2013-12-17
* https://github.com/nicinabox/superslides
* Copyright (c) 2013 Nic Aitch; Licensed MIT */
(function(b,d){var c,a="superslides";c=function(p,j){this.options=d.extend({play:!1,animation_speed:600,animation_easing:"swing",animation:"slide",inherit_width_from:b,inherit_height_from:b,pagination:!0,hashchange:!1,scrollable:!0,elements:{preserve:".preserve",nav:".slides-navigation",container:".slides-container",pagination:".slides-pagination"}},j);var u=this,q=d("<div>",{"class":"slides-control"}),f=1;this.$el=d(p),this.$container=this.$el.find(this.options.elements.container);var t=function(){return f=u._findMultiplier(),u.$el.on("click",u.options.elements.nav+" a",function(e){e.preventDefault(),u.stop(),d(this).hasClass("next")?u.animate("next",function(){u.start()}):u.animate("prev",function(){u.start()})}),d(document).on("keyup",function(e){37===e.keyCode&&u.animate("prev"),39===e.keyCode&&u.animate("next")}),d(b).on("resize",function(){setTimeout(function(){var e=u.$container.children();u.width=u._findWidth(),u.height=u._findHeight(),e.css({width:u.width,left:u.width}),u.css.containers(),u.css.images()},10)}),u.options.hashchange&&d(b).on("hashchange",function(){var e,h=u._parseHash();e=u._upcomingSlide(h),e>=0&&e!==u.current&&u.animate(e)}),u.pagination._events(),u.start(),u},k={containers:function(){u.init?(u.$el.css({height:u.height}),u.$control.css({width:u.width*f,left:-u.width}),u.$container.css({})):(d("body").css({margin:0}),u.$el.css({position:"relative",overflow:"hidden",width:"100%",height:u.height}),u.$control.css({position:"relative",transform:"translate3d(0)",height:"100%",width:u.width*f,left:-u.width}),u.$container.css({display:"none",margin:"0",padding:"0",listStyle:"none",position:"relative",height:"100%"})),1===u.size()&&u.$el.find(u.options.elements.nav).hide()},images:function(){var e=u.$container.find("img").not(u.options.elements.preserve);e.removeAttr("width").removeAttr("height").css({"-webkit-backface-visibility":"hidden","-ms-interpolation-mode":"bicubic",position:"absolute",left:"0",top:"0","z-index":"-1","max-width":"none"}),e.each(function(){var l=u.image._aspectRatio(this),o=this;if(d.data(this,"processed")){u.image._scale(o,l),u.image._center(o,l)}else{var h=new Image;h.onload=function(){u.image._scale(o,l),u.image._center(o,l),d.data(o,"processed",!0)},h.src=this.src}})},children:function(){var e=u.$container.children();e.is("img")&&(e.each(function(){if(d(this).is("img")){d(this).wrap("<div>");var h=d(this).attr("id");d(this).removeAttr("id"),d(this).parent().attr("id",h)}}),e=u.$container.children()),u.init||e.css({display:"none",left:2*u.width}),e.css({position:"absolute",overflow:"hidden",height:"100%",width:u.width,top:0,zIndex:0})}},g={slide:function(l,r){var o=u.$container.children(),h=o.eq(l.upcoming_slide);h.css({left:l.upcoming_position,display:"block"}),u.$control.animate({left:l.offset},u.options.animation_speed,u.options.animation_easing,function(){u.size()>1&&(u.$control.css({left:-u.width}),o.eq(l.upcoming_slide).css({left:u.width,zIndex:2}),l.outgoing_slide>=0&&o.eq(l.outgoing_slide).css({left:u.width,display:"none",zIndex:0})),r()})},fade:function(l,x){var r=this,h=r.$container.children(),w=h.eq(l.outgoing_slide),v=h.eq(l.upcoming_slide);v.css({left:this.width,opacity:0,display:"block"}).animate({opacity:1},r.options.animation_speed,r.options.animation_easing),l.outgoing_slide>=0?w.animate({opacity:0},r.options.animation_speed,r.options.animation_easing,function(){r.size()>1&&(h.eq(l.upcoming_slide).css({zIndex:2}),l.outgoing_slide>=0&&h.eq(l.outgoing_slide).css({opacity:1,display:"none",zIndex:0})),x()}):(v.css({zIndex:2}),x())}};g=d.extend(g,d.fn.superslides.fx);var i={_centerY:function(e){var h=d(e);h.css({top:(u.height-h.height())/2})},_centerX:function(e){var h=d(e);h.css({left:(u.width-h.width())/2})},_center:function(e){u.image._centerX(e),u.image._centerY(e)},_aspectRatio:function(e){if(!e.naturalHeight&&!e.naturalWidth){var h=new Image;h.src=e.src,e.naturalHeight=h.height,e.naturalWidth=h.width}return e.naturalHeight/e.naturalWidth},_scale:function(l,r){r=r||u.image._aspectRatio(l);var h=u.height/u.width,s=d(l);h>r?s.css({height:u.height,width:u.height/r}):s.css({height:u.width*r,width:u.width})}},m={_setCurrent:function(e){if(u.$pagination){var h=u.$pagination.children();h.removeClass("current"),h.eq(e).addClass("current")}},_addItem:function(s){var v=s+1,l=v,w=u.$container.children().eq(s),h=w.attr("id");h&&(l=h);var x=d("<a>",{href:"#"+l,text:l});x.appendTo(u.$pagination)},_setup:function(){if(u.options.pagination&&1!==u.size()){var e=d("<nav>",{"class":u.options.elements.pagination.replace(/^\./,"")});u.$pagination=e.appendTo(u.$el);for(var h=0;u.size()>h;h++){u.pagination._addItem(h)}}},_events:function(){u.$el.on("click",u.options.elements.pagination+" a",function(e){e.preventDefault();var l,h=u._parseHash(this.hash);l=u._upcomingSlide(h,!0),l!==u.current&&u.animate(l,function(){u.start()})})}};return this.css=k,this.image=i,this.pagination=m,this.fx=g,this.animation=this.fx[this.options.animation],this.$control=this.$container.wrap(q).parent(".slides-control"),u._findPositions(),u.width=u._findWidth(),u.height=u._findHeight(),this.css.children(),this.css.containers(),this.css.images(),this.pagination._setup(),t()},c.prototype={_findWidth:function(){return d(this.options.inherit_width_from).width()},_findHeight:function(){return d(this.options.inherit_height_from).height()},_findMultiplier:function(){return 1===this.size()?1:3},_upcomingSlide:function(e,g){if(g&&!isNaN(e)&&(e-=1),/next/.test(e)){return this._nextInDom()}if(/prev/.test(e)){return this._prevInDom()}if(/\d/.test(e)){return +e}if(e&&/\w/.test(e)){var f=this._findSlideById(e);return f>=0?f:0}return 0},_findSlideById:function(e){return this.$container.find("#"+e).index()},_findPositions:function(e,f){f=f||this,void 0===e&&(e=-1),f.current=e,f.next=f._nextInDom(),f.prev=f._prevInDom()},_nextInDom:function(){var e=this.current+1;return e===this.size()&&(e=0),e},_prevInDom:function(){var e=this.current-1;return 0>e&&(e=this.size()-1),e},_parseHash:function(e){return e=e||b.location.hash,e=e.replace(/^#/,""),e&&!isNaN(+e)&&(e=+e),e},size:function(){return this.$container.children().length},destroy:function(){return this.$el.removeData()},update:function(){this.css.children(),this.css.containers(),this.css.images(),this.pagination._addItem(this.size()),this._findPositions(this.current),this.$el.trigger("updated.slides")},stop:function(){clearInterval(this.play_id),delete this.play_id,this.$el.trigger("stopped.slides")},start:function(){var e=this;e.options.hashchange?d(b).trigger("hashchange"):this.animate(),this.options.play&&(this.play_id&&this.stop(),this.play_id=setInterval(function(){e.animate()},this.options.play)),this.$el.trigger("started.slides")},animate:function(k,h){var g=this,j={};if(!(this.animating||(this.animating=!0,void 0===k&&(k="next"),j.upcoming_slide=this._upcomingSlide(k),j.upcoming_slide>=this.size()))){if(j.outgoing_slide=this.current,j.upcoming_position=2*this.width,j.offset=-j.upcoming_position,("prev"===k||j.outgoing_slide>k)&&(j.upcoming_position=0,j.offset=0),g.size()>1&&g.pagination._setCurrent(j.upcoming_slide),g.options.hashchange){var i=j.upcoming_slide+1,f=g.$container.children(":eq("+j.upcoming_slide+")").attr("id");b.location.hash=f?f:i}g.$el.trigger("animating.slides",[j]),g.animation(j,function(){g._findPositions(j.upcoming_slide,g),"function"==typeof h&&h(),g.animating=!1,g.$el.trigger("animated.slides"),g.init||(g.$el.trigger("init.slides"),g.init=!0,g.$container.fadeIn("fast"))})}}},d.fn[a]=function(e,g){var f=[];return this.each(function(){var i,k,j;return i=d(this),k=i.data(a),j="object"==typeof e&&e,k||(f=i.data(a,k=new c(this,j))),"string"==typeof e&&(f=k[e],"function"==typeof f)?f=f.call(k,g):void 0}),f},d.fn[a].fx={}})(this,jQuery);